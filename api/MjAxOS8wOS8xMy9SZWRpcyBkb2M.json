{"title":"Redis doc","date":"2019-09-12T16:00:00.000Z","link":"2019/09/13/Redis doc","updated":"2019-11-01T09:04:45.698Z","content":"<h3 id=\"常用命令\">常用命令<a href=\"2019/09/13/Redis doc#常用命令\"></a></h3><p><strong>启动</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">run redis : redis-cli redis-server</span><br></pre></td></tr></table></div></figure>\n<h3 id=\"字符串\">字符串<a href=\"2019/09/13/Redis doc#字符串\"></a></h3><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> key <span class=\"string\">\"this is key\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">getrange key 0 -1</span><br><span class=\"line\">getrange key 0 3</span><br><span class=\"line\">mget</span><br><span class=\"line\">strlen</span><br><span class=\"line\">**getset**</span><br><span class=\"line\"></span><br><span class=\"line\">返回给定 key 的旧值。 当 key 没有旧值时，即 key 不存在时，返回 nil 。</span><br><span class=\"line\">当 key 存在但不是字符串类型时，返回一个错误。</span><br><span class=\"line\">        getset db <span class=\"built_in\">test</span></span><br></pre></td></tr></table></div></figure>\n<p>Redis可以被告知密钥应该只存在一段时间。这是通过EXPIRE和TTL命令完成的。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET resource:lock <span class=\"string\">\"Redis Demo\"</span></span><br><span class=\"line\">EXPIRE resource:lock 120</span><br></pre></td></tr></table></div></figure>\n<p>这会导致密钥资源：锁定在120秒内被删除。您可以使用TTL命令测试密钥的存在时间。它返回将被删除的秒数。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TTL resource:lock =&gt; 113</span><br><span class=\"line\">// after 113s</span><br><span class=\"line\">TTL resource:lock =&gt; -2</span><br></pre></td></tr></table></div></figure>\n<p>键的TTL的-2表示该键不再存在（不再）。一个-1的TTL钥匙意味着它永远不会过期。请注意，如果您设置了一个键，它的TTL将被重置。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET resource:lock <span class=\"string\">\"Redis Demo 1\"</span></span><br><span class=\"line\">EXPIRE resource:lock 120</span><br><span class=\"line\">TTL resource:lock =&gt; 119</span><br><span class=\"line\">SET resource:lock <span class=\"string\">\"Redis Demo 2\"</span></span><br><span class=\"line\">TTL resource:lock =&gt; -1</span><br></pre></td></tr></table></div></figure>\n\n<p>##列表<br>    rpush friends ‘bob’<br>    lrange friends 0 -1<br>    LPOP从列表中删除第一个元素并返回它。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LPOP friends =&gt; <span class=\"string\">\"Sam\"</span></span><br><span class=\"line\">RPOP从列表中删除最后一个元素并将其返回。</span><br><span class=\"line\">RPOP friends =&gt; <span class=\"string\">\"Bob\"</span></span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"集合\">集合<a href=\"2019/09/13/Redis doc#集合\"></a></h2><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sadd superpowers <span class=\"string\">\"flight\"</span></span><br><span class=\"line\">sadd superpowers <span class=\"string\">\"x-ray vision\"</span></span><br><span class=\"line\">sadd superpowers <span class=\"string\">\"reflexrs\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">delete</span><br><span class=\"line\">srem superpowers <span class=\"string\">\"reflexrs\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">find sismember</span><br><span class=\"line\">sismember superpowers <span class=\"string\">'flight'</span> <span class=\"comment\"># 1</span></span><br><span class=\"line\">find al smembers</span><br><span class=\"line\">smembers superpowers <span class=\"comment\">#find all</span></span><br><span class=\"line\"></span><br><span class=\"line\">合并 sunion</span><br><span class=\"line\">sadd birdpower <span class=\"string\">'pecking'</span></span><br><span class=\"line\">sadd birdpower <span class=\"string\">'flight'</span></span><br><span class=\"line\">sunion superpowers birdpowers</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 排序 1.2时引入</span></span><br><span class=\"line\">ZADD hackers 1940 <span class=\"string\">\"Alan Kay\"</span></span><br><span class=\"line\">ZADD hackers 1906 <span class=\"string\">\"Grace Hopper\"</span></span><br><span class=\"line\">ZADD hackers 1953 <span class=\"string\">\"Richard Stallman\"</span></span><br><span class=\"line\">ZADD hackers 1965 <span class=\"string\">\"Yukihiro Matsumoto\"</span></span><br><span class=\"line\">ZADD hackers 1916 <span class=\"string\">\"Claude Shannon\"</span></span><br><span class=\"line\">ZADD hackers 1969 <span class=\"string\">\"Linus Torvalds\"</span></span><br><span class=\"line\">ZADD hackers 1957 <span class=\"string\">\"Sophie Wilson\"</span></span><br><span class=\"line\">ZADD hackers 1912 <span class=\"string\">\"Alan Turing\"</span></span><br><span class=\"line\">zrange hackers 0 -1</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"hash\">hash<a href=\"2019/09/13/Redis doc#hash\"></a></h3><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hset user: 1000 name <span class=\"string\">\"john Smith\"</span></span><br><span class=\"line\">hset user:1000 password <span class=\"string\">\"s3cret\"</span></span><br><span class=\"line\">hset usert:1000 email <span class=\"string\">\"john.Smith@example.com\"</span></span><br><span class=\"line\">hgetall user:1000</span><br><span class=\"line\">hget user:1000 name</span><br></pre></td></tr></table></div></figure>\n","prev":{"title":"再议三次握手","link":"2019/09/13/再议三次握手和四次挥手"},"next":{"title":"WSGI","link":"2019/09/03/WSGI"},"plink":"http://jccjd.top/2019/09/13/Redis doc/","toc":[{"title":"集合","id":"集合","index":"1","children":[{"title":"hash","id":"hash","index":"1.1"}]}],"copyright":{"link":"<a href=\"http://jccjd.top/2019/09/13/Redis doc/\" title=\"Redis doc\">http://jccjd.top/2019/09/13/Redis doc/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}